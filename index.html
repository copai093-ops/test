<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Math & Reasoning MCQ Test</title>

<style>
body{
  font-family: Arial;
  background:#e8f4f8;
  max-width:900px;
  margin:auto;
  padding:20px;
}
.q{
  background:#fff;
  padding:15px;
  margin:15px 0;
  border-radius:8px;
  display:none;
}
.q label{
  display:block;
  margin:6px 0;
  font-size:16px;
  cursor:pointer;
}
button{
  padding:12px 20px;
  font-size:16px;
  background:green;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin-top:10px;
  margin-right:10px;
}
#countdown{
  font-size:20px;
  font-weight:bold;
  color:#d9534f;
  text-align:right;
}
</style>
</head>

<body>

<h1 style="text-align:center;">Math & Reasoning MCQ Test</h1>

<!-- NAME -->
<div id="nameSection" style="text-align:center;margin-top:40px;">
  <input type="text" id="name" placeholder="Apna pura naam likho"
   style="width:80%;padding:10px;font-size:16px">
  <br><br>
  <button onclick="startTest()">Next</button>
</div>

<div id="countdown"></div>

<!-- TEST -->
<div id="testContent" style="display:none;">

<div class="q"><b>Q1.</b> ‚àö196 = ?
<label><input type="radio" name="q1" value="13">13</label>
<label><input type="radio" name="q1" value="14">14</label>
<label><input type="radio" name="q1" value="15">15</label>
<label><input type="radio" name="q1" value="16">16</label>
</div>

<div class="q"><b>Q2.</b> ‚àö25 = ?
<label><input type="radio" name="q2" value="4">4</label>
<label><input type="radio" name="q2" value="5">5</label>
<label><input type="radio" name="q2" value="6">6</label>
<label><input type="radio" name="q2" value="7">7</label>
</div>

<div class="q"><b>Q3.</b> ‚àö900 = ?
<label><input type="radio" name="q3" value="28">28</label>
<label><input type="radio" name="q3" value="29">29</label>
<label><input type="radio" name="q3" value="30">30</label>
<label><input type="radio" name="q3" value="31">31</label>
</div>

<div class="q"><b>Q4.</b> ‚àö64 = ?
<label><input type="radio" name="q4" value="6">6</label>
<label><input type="radio" name="q4" value="7">7</label>
<label><input type="radio" name="q4" value="8">8</label>
<label><input type="radio" name="q4" value="9">9</label>
</div>

<div class="q"><b>Q5.</b> ‚àö441 = ?
<label><input type="radio" name="q5" value="20">20</label>
<label><input type="radio" name="q5" value="21">21</label>
<label><input type="radio" name="q5" value="22">22</label>
<label><input type="radio" name="q5" value="23">23</label>
</div>

<div class="q"><b>Q6.</b> ‚àö121 = ?
<label><input type="radio" name="q6" value="10">10</label>
<label><input type="radio" name="q6" value="11">11</label>
<label><input type="radio" name="q6" value="12">12</label>
<label><input type="radio" name="q6" value="13">13</label>
</div>

<div class="q"><b>Q7.</b> ‚àö361 = ?
<label><input type="radio" name="q7" value="18">18</label>
<label><input type="radio" name="q7" value="19">19</label>
<label><input type="radio" name="q7" value="20">20</label>
<label><input type="radio" name="q7" value="21">21</label>
</div>

<div class="q"><b>Q8.</b> ‚àö16 = ?
<label><input type="radio" name="q8" value="3">3</label>
<label><input type="radio" name="q8" value="4">4</label>
<label><input type="radio" name="q8" value="5">5</label>
<label><input type="radio" name="q8" value="6">6</label>
</div>

<div class="q"><b>Q9.</b> ‚àö576 = ?
<label><input type="radio" name="q9" value="23">23</label>
<label><input type="radio" name="q9" value="24">24</label>
<label><input type="radio" name="q9" value="25">25</label>
<label><input type="radio" name="q9" value="26">26</label>
</div>

<div class="q"><b>Q10.</b> ‚àö81 = ?
<label><input type="radio" name="q10" value="8">8</label>
<label><input type="radio" name="q10" value="9">9</label>
<label><input type="radio" name="q10" value="10">10</label>
<label><input type="radio" name="q10" value="11">11</label>
</div>

<div class="q"><b>Q11.</b> ‚àö1 = ?
<label><input type="radio" name="q11" value="0">0</label>
<label><input type="radio" name="q11" value="1">1</label>
<label><input type="radio" name="q11" value="2">2</label>
<label><input type="radio" name="q11" value="3">3</label>
</div>

<div class="q"><b>Q12.</b> ‚àö256 = ?
<label><input type="radio" name="q12" value="15">15</label>
<label><input type="radio" name="q12" value="16">16</label>
<label><input type="radio" name="q12" value="17">17</label>
<label><input type="radio" name="q12" value="18">18</label>
</div>

<div class="q"><b>Q13.</b> ‚àö100 = ?
<label><input type="radio" name="q13" value="9">9</label>
<label><input type="radio" name="q13" value="10">10</label>
<label><input type="radio" name="q13" value="11">11</label>
<label><input type="radio" name="q13" value="12">12</label>
</div>

<div class="q"><b>Q14.</b> ‚àö784 = ?
<label><input type="radio" name="q14" value="27">27</label>
<label><input type="radio" name="q14" value="28">28</label>
<label><input type="radio" name="q14" value="29">29</label>
<label><input type="radio" name="q14" value="30">30</label>
</div>

<div class="q"><b>Q15.</b> ‚àö49 = ?
<label><input type="radio" name="q15" value="6">6</label>
<label><input type="radio" name="q15" value="7">7</label>
<label><input type="radio" name="q15" value="8">8</label>
<label><input type="radio" name="q15" value="9">9</label>
</div>

<div class="q"><b>Q16.</b> ‚àö4 = ?
<label><input type="radio" name="q16" value="1">1</label>
<label><input type="radio" name="q16" value="2">2</label>
<label><input type="radio" name="q16" value="3">3</label>
<label><input type="radio" name="q16" value="4">4</label>
</div>

<div class="q"><b>Q17.</b> ‚àö225 = ?
<label><input type="radio" name="q17" value="14">14</label>
<label><input type="radio" name="q17" value="15">15</label>
<label><input type="radio" name="q17" value="16">16</label>
<label><input type="radio" name="q17" value="17">17</label>
</div>

<div class="q"><b>Q18.</b> ‚àö324 = ?
<label><input type="radio" name="q18" value="17">17</label>
<label><input type="radio" name="q18" value="18">18</label>
<label><input type="radio" name="q18" value="19">19</label>
<label><input type="radio" name="q18" value="20">20</label>
</div>

<div class="q"><b>Q19.</b> ‚àö529 = ?
<label><input type="radio" name="q19" value="22">22</label>
<label><input type="radio" name="q19" value="23">23</label>
<label><input type="radio" name="q19" value="24">24</label>
<label><input type="radio" name="q19" value="25">25</label>
</div>

<div class="q"><b>Q20.</b> ‚àö144 = ?
<label><input type="radio" name="q20" value="11">11</label>
<label><input type="radio" name="q20" value="12">12</label>
<label><input type="radio" name="q20" value="13">13</label>
<label><input type="radio" name="q20" value="14">14</label>
</div>

<div class="q"><b>Q21.</b> ‚àö676 = ?
<label><input type="radio" name="q21" value="25">25</label>
<label><input type="radio" name="q21" value="26">26</label>
<label><input type="radio" name="q21" value="27">27</label>
<label><input type="radio" name="q21" value="28">28</label>
</div>

<div class="q"><b>Q22.</b> ‚àö9 = ?
<label><input type="radio" name="q22" value="2">2</label>
<label><input type="radio" name="q22" value="3">3</label>
<label><input type="radio" name="q22" value="4">4</label>
<label><input type="radio" name="q22" value="5">5</label>
</div>

<div class="q"><b>Q23.</b> ‚àö400 = ?
<label><input type="radio" name="q23" value="18">18</label>
<label><input type="radio" name="q23" value="19">19</label>
<label><input type="radio" name="q23" value="20">20</label>
<label><input type="radio" name="q23" value="21">21</label>
</div>

<div class="q"><b>Q24.</b> ‚àö36 = ?
<label><input type="radio" name="q24" value="5">5</label>
<label><input type="radio" name="q24" value="6">6</label>
<label><input type="radio" name="q24" value="7">7</label>
<label><input type="radio" name="q24" value="8">8</label>
</div>

<div class="q"><b>Q25.</b> ‚àö289 = ?
<label><input type="radio" name="q25" value="16">16</label>
<label><input type="radio" name="q25" value="17">17</label>
<label><input type="radio" name="q25" value="18">18</label>
<label><input type="radio" name="q25" value="19">19</label>
</div>

<div class="q"><b>Q26.</b> ‚àö484 = ?
<label><input type="radio" name="q26" value="21">21</label>
<label><input type="radio" name="q26" value="22">22</label>
<label><input type="radio" name="q26" value="23">23</label>
<label><input type="radio" name="q26" value="24">24</label>
</div>

<div class="q"><b>Q27.</b> ‚àö169 = ?
<label><input type="radio" name="q27" value="12">12</label>
<label><input type="radio" name="q27" value="13">13</label>
<label><input type="radio" name="q27" value="14">14</label>
<label><input type="radio" name="q27" value="15">15</label>
</div>

<div class="q"><b>Q28.</b> ‚àö729 = ?
<label><input type="radio" name="q28" value="26">26</label>
<label><input type="radio" name="q28" value="27">27</label>
<label><input type="radio" name="q28" value="28">28</label>
<label><input type="radio" name="q28" value="29">29</label>
</div>

<div class="q"><b>Q29.</b> ‚àö841 = ?
<label><input type="radio" name="q29" value="28">28</label>
<label><input type="radio" name="q29" value="29">29</label>
<label><input type="radio" name="q29" value="30">30</label>
<label><input type="radio" name="q29" value="31">31</label>
</div>

<div class="q"><b>Q30.</b> ‚àö625 = ?
<label><input type="radio" name="q30" value="23">23</label>
<label><input type="radio" name="q30" value="24">24</label>
<label><input type="radio" name="q30" value="25">25</label>
<label><input type="radio" name="q30" value="26">26</label>
</div>


<div>
<button onclick="prevQuestion()">Previous</button>
<button onclick="nextQuestion()">Next / Submit</button>
</div>

</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

const WEB_APP_URL ="https://script.google.com/macros/s/AKfycbwX2q18UcM1EGaN2oaA-bW3dSypidBPDqrT9nVyR5rkz6K7fJLT_HnJqqidpR86-VY8/exec";

const nameInput = document.getElementById("name");
const nameSection = document.getElementById("nameSection");
const testContent = document.getElementById("testContent");
const countdown = document.getElementById("countdown");
const qs = document.querySelectorAll(".q");

let qIndex = 0;
let timeLeft = 30 * 60;
let timer;

if(localStorage.getItem("testSubmitted")==="yes"){
  document.body.innerHTML =
  "<h2 style='text-align:center;color:red'>Test already submitted ‚ùå</h2>";
}

window.startTest = function(){
  if(!nameInput.value.trim()){
    alert("Naam likho");
    return;
  }
  nameSection.style.display="none";
  testContent.style.display="block";
  showQ();

  timer = setInterval(()=>{
    countdown.innerText =
      `Time Left: ${Math.floor(timeLeft/60)}m ${timeLeft%60}s`;
    timeLeft--;
    if(timeLeft < 0) submit();
  },1000);
}

function showQ(){
  qs.forEach(q=>q.style.display="none");
  qs[qIndex].style.display="block";
}

window.nextQuestion = function(){
  if(qIndex < qs.length-1){
    qIndex++;
    showQ();
  }else{
    submit();
  }
}

window.prevQuestion = function(){
  if(qIndex > 0){
    qIndex--;
    showQ();
  }
}

/* üî• IMPORTANT FIX */
function getAns(q){
  let options = document.querySelectorAll(`input[name="${q}"]`);
  for(let i=0;i<options.length;i++){
    if(options[i].checked){
      return String.fromCharCode(65 + i); // A B C D
    }
  }
  return "";
}

function submit(){
  clearInterval(timer);

  let data = { name: nameInput.value };
  for(let i=1;i<=qs.length;i++){
    data["q"+i] = getAns("q"+i);
  }

  fetch(WEB_APP_URL,{
    method:"POST",
    body: JSON.stringify(data),
    mode:"no-cors"
  });

  localStorage.setItem("testSubmitted","yes");

  document.body.innerHTML =
  "<h2 style='text-align:center;color:green'>Test Submitted Successfully ‚úÖ</h2>";
}

});
</script>

</body>
</html>
